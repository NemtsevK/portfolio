import{wrapGrid}from"https://cdn.skypack.dev/animate-css-grid@latest";import{works}from"./data/works.js";const COUNT_WORKS_SHOW=6,TIME_ANIMATION=1e3;function initWorksContainer(){const e=document.querySelector(".works__list"),t=document.querySelector(".works__button");setWorksContainer(),e.addEventListener("click",onWorksContainerClick),e.addEventListener("keyup",onWorksContainerKeyUp),t.addEventListener("click",onWorksButtonClick)}function setWorksContainer(){const e=document.querySelector(".works__list"),t=document.querySelector("#work").content.querySelector(".work"),o=document.createDocumentFragment();works.forEach(((e,r)=>{r<COUNT_WORKS_SHOW&&addWork(o,t,e,!0)})),e.appendChild(o)}function addWork(e,t,o,r=!1){const{title:n,description:c,image:i,about:s,site:a,technologies:l,source:u}=o,d=t.cloneNode(!0),k=d.querySelector(".work__technologies"),w=d.querySelector(".work__about");!1===r&&(d.style.animationName="slide-work-down"),d.querySelector(".work__title").innerText=n,d.querySelector(".work__description").innerText=c,d.querySelector(".work__image").src=i,d.querySelector(".work__image").alt=n,d.querySelector(".work__button--site").href=a,d.querySelector(".work__button--source").href=u,s.forEach((e=>{const t=document.createElement("li");t.classList.add("work__about-item"),t.innerText=e,w.appendChild(t)})),l.forEach((e=>{const t=document.createElement("li");t.classList.add("work__technology"),t.innerText=e,k.appendChild(t)})),e.appendChild(d)}function showActiveContainer(e,t){if(e&&!1===e.classList.contains("work--active")){wrapGrid(t);const o=t.querySelector(".work--active");o&&(o.classList.remove("work--active"),o.tabIndex="0"),e.classList.add("work--active"),e.tabIndex="-1"}}function onWorksButtonClick({target:e}){const t=document.querySelector(".works__list"),o=t.querySelectorAll(".work");if("show"===e.value){const r=document.querySelector("#work").content.querySelector(".work"),n=document.createDocumentFragment();works.forEach(((e,t)=>{t>=o.length&&t<COUNT_WORKS_SHOW+o.length&&addWork(n,r,e)})),t.appendChild(n);t.querySelectorAll(".work").length===works.length&&(e.value="hide",e.textContent="Скрыть")}else o.forEach(((e,t)=>{t>=COUNT_WORKS_SHOW&&(e.style.animationName="slide-work-up",setTimeout((()=>e.remove()),TIME_ANIMATION))})),e.value="show",e.textContent="Показать больше"}function onWorksContainerClick(e){const t=document.querySelector(".works__list"),o=e.target.closest(".work");if(e.target.closest(".work__button--close"))return o.classList.remove("work--active"),void(o.tabIndex="0");showActiveContainer(o,t)}function onWorksContainerKeyUp(e){const t=document.querySelector(".works__list");"Enter"===e.code&&showActiveContainer(e.target,t)}export{initWorksContainer};